#!/usr/bin/env bash
# Test using associative array to simplify calls and to improve readability.

parse_pwrstat() {
  pwrstat -status | awk '
    BEGIN {
      FS = "[.]+"
    }
    /Model Name/        { data[0] = "Model Name:            " $2 }
    /State/             { data[1] = "Status:                " $2 }
    /Battery Capacity/  { data[2] = "Battery Capacity:      " $2 }
    /Remaining Runtime/ { data[3] = "Remaining Runtime:     " $2 }
    /Load/              { data[4] = "Load:                  " $2 }
    /Last Power Event/  { data[5] = "Last Power Event:      " $2 }
    END {
      for (i = 0; i < 6; i++) {
        print data[i]
      }
    }
  '
}

parse_pwrstat
